// Mochi Feeds app
// Copyright Alistair Cunningham 2025

{
    "version": "1.0",
	"label": "app_name",
	"classes": ["feed"],
	"paths": ["feeds"],
	"services": ["feeds"],

	"architecture": {"engine": "starlark", "version": 2},
	"execute": ["feeds.star"],

	"database": {
		"schema": 2,
		"file": "feeds.db",
		"create": {"function": "database_create"},
		"upgrade": {"function": "database_upgrade"},
		"helpers": ["attachments"]
	},

    "icons": [
        {"action": "", "label": "app_name", "file": "images/icon.svg"}
    ],

	"actions": {
		"": {"file": "web/dist/index.html"},
		"assets": {"files": "web/dist/assets"},
        "images": {"files": "web/dist/images"},
		"list": {"function": "action_view"},
		"attachments": {"attachments": true},
		"create": {"function": "action_create"},
		"find": {"function": "action_find"},
		"search": {"function": "action_search"},
		"new": {"function": "action_new"},
		"post/create": {"function": "action_post_create"},
		"post/new": {"function": "action_post_new"},
		":feed": {"function": "action_view"},
		":feed/create": {"function": "action_post_create"},
		":feed/post": {"function": "action_post_new"},
		":feed/subscribe": {"function": "action_subscribe"},
		":feed/unsubscribe": {"function": "action_unsubscribe"},
		":feed/:post": {"function": "action_view"},
		":feed/:post/comment": {"function": "action_comment_new"},
		":feed/:post/create": {"function": "action_comment_create"},
		":feed/:post/react/:reaction": {"function": "action_post_react"},
		":feed/:post/:comment/react/:reaction": {"function": "action_comment_react"}
	},

	"events": {
		"comment/create": {"function": "event_comment_create"},
		"comment/submit": {"function": "event_comment_submit"},
		"comment/react": {"function": "event_comment_reaction"},
		"post/create": {"function": "event_post_create"},
		"post/react": {"function": "event_post_reaction"},
		"subscribe": {"function": "event_subscribe"},
		"unsubscribe": {"function": "event_unsubscribe"},
		"update": {"function": "event_update"}
	}
}
