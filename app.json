{
	"version": "5.14",
	"label": "app_name",
	"classes": ["feed"],
	"paths": ["feeds"],
	"services": ["feeds"],

	"architecture": {"engine": "starlark", "version": 4},
	"execute": ["feeds.star"],
	"permissions": ["interests/read", "interests/write", "account/ai"],

	"database": {
		"schema": 25,
		"file": "feeds.db",
		"create": {"function": "database_create"},
		"upgrade": {"function": "database_upgrade"}
	},

    "icons": [
        {"action": "", "label": "app_name", "file": "images/icon.svg"}
    ],

	"actions": {
		"": {"file": "web/dist/index.html"},
		"new": {"file": "web/dist/index.html"},
		"search": {"file": "web/dist/index.html"},
		"assets": {"files": "web/dist/assets", "public": true},
		"images": {"files": "web/dist/images", "public": true},

		"-/info": {"function": "action_info_class"},
		"-/create": {"function": "action_create"},
		"-/directory/search": {"function": "action_search"},
		"-/recommendations": {"function": "action_recommendations"},
		"-/probe": {"function": "action_probe"},
		"-/subscribe": {"function": "action_subscribe"},
		"-/unsubscribe": {"function": "action_unsubscribe"},
		":feed": {"file": "web/dist/index.html", "public": true, "opengraph": "opengraph_feed"},
		":feed/-/subscribe": {"function": "action_subscribe"},
		":feed/-/unsubscribe": {"function": "action_unsubscribe"},
		":feed/-/info": {"function": "action_info_entity", "public": true},
		":feed/-/posts": {"function": "action_view", "public": true},
		":feed/-/post/create": {"function": "action_post_create"},
		":feed/-/post/new": {"function": "action_post_new"},
		":feed/-/delete": {"function": "action_delete"},
		":feed/-/rename": {"function": "action_rename"},
		":feed/-/access": {"function": "action_access_list"},
		":feed/-/access/set": {"function": "action_access_set"},
		":feed/-/access/revoke": {"function": "action_access_revoke"},
		":feed/-/members": {"function": "action_member_list"},
		":feed/-/members/add": {"function": "action_member_add"},
		":feed/-/members/remove": {"function": "action_member_remove"},
		":feed/-/tags": {"function": "action_feed_tags", "public": true},
		":feed/-/sources": {"function": "action_sources_list"},
		":feed/-/sources/add": {"function": "action_sources_add"},
		":feed/-/sources/remove": {"function": "action_sources_remove"},
		":feed/-/sources/edit": {"function": "action_sources_edit"},
		":feed/-/sources/poll": {"function": "action_sources_poll"},
		":feed/-/attachments/:id": {"feature": "attachment", "public": true},
		":feed/-/attachments/:id/thumbnail": {"feature": "attachment/thumbnail", "public": true},
		":feed/-/tags/interest": {"function": "action_tag_interest"},
		":feed/-/interests/suggest": {"function": "action_suggest_interests"},
		":feed/-/scoring": {"function": "action_scoring_toggle"},

		":feed/-/:post": {"file": "web/dist/index.html", "function": "action_view", "public": true, "opengraph": "opengraph_feed"},
		":feed/-/:post/edit": {"function": "action_post_edit"},
		":feed/-/:post/delete": {"function": "action_post_delete"},
		":feed/-/:post/react": {"function": "action_post_react"},
		":feed/-/:post/tags": {"function": "action_tags_list", "public": true},
		":feed/-/:post/tags/add": {"function": "action_tags_add"},
		":feed/-/:post/tags/remove": {"function": "action_tags_remove"},
		":feed/-/:post/comment/new": {"function": "action_comment_new"},
		":feed/-/:post/comment/create": {"function": "action_comment_create"},
		":feed/-/:post/comment/react": {"function": "action_comment_react"},
		":feed/-/:post/:comment/edit": {"function": "action_comment_edit"},
		":feed/-/:post/:comment/delete": {"function": "action_comment_delete"},

		":feed/assets": {"files": "web/dist/assets", "public": true},
		":feed/images": {"files": "web/dist/images", "public": true},
		":feed/:post": {"file": "web/dist/index.html", "public": true, "opengraph": "opengraph_feed"},
		"-/users/search": {"function": "action_users_search"},
		"-/groups": {"function": "action_groups"},

		"-/rss": {"function": "action_rss_all", "public": true},
		":feed/-/rss": {"function": "action_rss", "public": true},
		"-/rss/token": {"function": "action_rss_token"},

		":feed/-/ai": {"function": "action_ai_toggle"},

		"-/notifications/subscribe": {"function": "action_notifications_subscribe"},
		"-/notifications/check": {"function": "action_notifications_check"},
		"-/notifications/destinations": {"function": "action_notifications_destinations"}
	},

	"events": {
		"info": {"function": "event_info"},
		"schema": {"function": "event_schema"},
		"comment/create": {"function": "event_comment_create"},
		"comment/submit": {"function": "event_comment_submit"},
		"comment/edit": {"function": "event_comment_edit"},
		"comment/edit/submit": {"function": "event_comment_edit_submit"},
		"comment/delete": {"function": "event_comment_delete"},
		"comment/delete/submit": {"function": "event_comment_delete_submit"},
		"comment/react": {"function": "event_comment_reaction"},
		"comment/react/submit": {"function": "event_comment_react_submit"},
		"comment/add": {"function": "event_comment_add"},
		"comment/react/add": {"function": "event_comment_react_add"},
		"tag/add": {"function": "event_tag_add"},
		"tag/remove": {"function": "event_tag_remove"},
		"deleted": {"function": "event_deleted"},
		"post/create": {"function": "event_post_create"},
		"post/edit": {"function": "event_post_edit"},
		"post/delete": {"function": "event_post_delete"},
		"post/react": {"function": "event_post_reaction"},
		"post/react/submit": {"function": "event_post_react_submit"},
		"post/react/add": {"function": "event_post_react_add"},
		"subscribe": {"function": "event_subscribe"},
		"unsubscribe": {"function": "event_unsubscribe"},
		"update": {"function": "event_update"},
		"view": {"function": "event_view"},
		"attachment/view": {"function": "event_attachment_view"},
		"sources/poll": {"function": "event_sources_poll"},
		"sources/watchdog": {"function": "event_sources_watchdog"},
		"ai/tag": {"function": "event_ai_tag"}
	}
}
